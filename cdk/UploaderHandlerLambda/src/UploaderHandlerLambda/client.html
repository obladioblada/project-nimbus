<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input type="text" id="url" placeholder="Input Lamda URL">
<br><br>
<input type="file" id="fileInput">
<p>Upload percentage: <span id="uploadPercent"></span> </p>
<br><br>
</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script language="JavaScript">
    
    document.getElementById("fileInput").addEventListener('change', handleFileChange);
    async function handleFileChange(e) {
        const URL = document.getElementById("url").value;
        try {
            // take the first file from FilesList
            const file = e.target.files[0];
            // Extract Content-Type & filename
            const {
                type,
                name
            } = file;
            
            console.log(name)
            console.log(type)
            // Get upload URL
            let resp = await axios.put(
                URL, {
                    contentType: type,
                    ext: name.split(".").pop(), // take only file extension
                    isPublic: true, // make it public so you can preview
                }
            );
            
            await axios.put(URL, file, {
                headers: {
                    "Content-Type": file.type
                },
                
                onUploadProgress: (e) => {
                    //  Show progress
                    document.getElementById("uploadPercent").innerHTML = Math.round((e.loaded * 100) / e.total);
                },
            });
            
            // suuccessfully uploaded
            document.getElementById("uploadPercent").innerHTML = "Completed";
        } catch (e) {
            // Log errors
            console.log(e);
        }
    }
</script>
</html>